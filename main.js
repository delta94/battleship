!function(e){var t={};function o(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);const a=()=>{let e=!0;return{sendAttack:(e,t)=>{e.receiveAttack(t)},getPlayerTurn:()=>e,setPlayerTurn:t=>e=t}},n=()=>{const e={playerTurn:!1,availableCoordinates:["A1","B1","C1","D1","E1","F1","G1","H1","A2","B2","C2","D2","E2","F2","G2","H2","A3","B3","C3","D3","E3","F3","G3","H3","A4","B4","C4","D4","E4","F4","G4","H4","A5","B5","C5","D5","E5","F5","G5","H5","A6","B6","C6","D6","E6","F6","G6","H6","A7","B7","C7","D7","E7","F7","G7","H7","A8","B8","C8","D8","E8","F8","G8","H8"],maxLength:63,getAvailableCoordinates:function(){return this.availableCoordinates},setAvailableCoordinates:function(e,t){this.availableCoordinates=e.filter(e=>e!==t)},randomCoordinate:function(){const e=this.availableCoordinates[Math.floor(Math.random()*(this.maxLength-0+1))+0];this.maxLength=this.maxLength-1;const t=this.getAvailableCoordinates().find(t=>t===e);return this.setAvailableCoordinates(this.getAvailableCoordinates(),t),e}};return Object.assign(a(),e)},r=()=>{const e=[],t=[];return{getMissedShots:()=>t,getBattleships:()=>e,receiveAttack:o=>{const a=e.find(e=>e.getShipCoordinates().includes(o));a?a.hit(a.getShipCoordinates().indexOf(o)):t.push(o)},placeShip:(...t)=>{const o=function(e){const t=e;return{getShipCoordinates:()=>t,isSunk:()=>t.every(e=>"hit"===e),hit:e=>{t[e]="hit"},updated:!1}}(t);e.push(o)},allShipsSunk:()=>e.map(e=>e.isSunk()).every(e=>!0===e)}},s={GameOver:e=>{const t=document.querySelector(".main-screen"),o=document.querySelector(".game-over-screen"),a=document.querySelector(".winner");t.style.opacity=.3,o.classList.add("active"),a.textContent=e}};function c(e){const t=document.querySelector(`.gameboard-${e}`);for(let e=1;e<=64;e++){const o=document.createElement("div");o.classList.add("cell"),e<=8?o.dataset.coordinate=`A${e}`:e>8&&e<=16?o.dataset.coordinate=`B${e-8}`:e>16&&e<=24?o.dataset.coordinate=`C${e-16}`:e>24&&e<=32?o.dataset.coordinate=`D${e-24}`:e>32&&e<=40?o.dataset.coordinate=`E${e-32}`:e>40&&e<=48?o.dataset.coordinate=`F${e-40}`:e>48&&e<=56?o.dataset.coordinate=`G${e-48}`:e>56&&e<=64&&(o.dataset.coordinate=`H${e-56}`),t.appendChild(o)}}function i(e,t){const o=document.querySelector(`#${t}-sunk-ships .biggest-sunk`),a=document.querySelector(`#${t}-sunk-ships .bigger-sunk`),n=document.querySelector(`#${t}-sunk-ships .smaller-sunk`),r=document.querySelector(`#${t}-sunk-ships .smallest-sunk`),s=document.querySelectorAll(`#${t}-sunk-ships figure`),c=e.getBattleships().filter(e=>{if(e.isSunk())return e});s.forEach(e=>e.classList.remove("blink-1")),c.forEach(e=>{!1===e.updated&&(1===e.getShipCoordinates().length?setTimeout(()=>{s[3].classList.add("blink-1")},250):2===e.getShipCoordinates().length?s[2].classList.add("blink-1"):3===e.getShipCoordinates().length?s[1].classList.add("blink-1"):4===e.getShipCoordinates().length&&s[0].classList.add("blink-1"),e.updated=!0)});let i=0,l=0,d=0,u=0;c.map(e=>e.getShipCoordinates()).forEach(e=>{1===e.length?(u++,r.textContent=`${u}/4`,4===u&&s[3].classList.add("all-sunk")):2===e.length?(d++,n.textContent=`${d}/3`,3===d&&s[2].classList.add("all-sunk")):3===e.length?(l++,a.textContent=`${l}/2`,2===l&&s[1].classList.add("all-sunk")):4===e.length&&(i++,o.textContent=`${i}/1`,1===i&&s[0].classList.add("all-sunk"))})}function l(){document.querySelector(".start-screen").classList.add("hide")}function d(){document.querySelector(".main-screen").style.display="flex"}function u(){document.querySelector(".boards div#container-two.container").style.display="none"}function m(){const e=document.querySelector("button.start-game");e.addEventListener("click",e=>{e.preventDefault(),function(){const e=document.querySelector(".boards div#container-two.container"),t=document.querySelector("#form-container"),o=document.querySelectorAll(".sunk-ships");e.style.display="flex",t.style.display="none",o.forEach(e=>e.style.display="flex")}()}),e.style.backgroundColor="#087e8b",e.style.color="white",e.style.transform="scale(1.1)"}function p(){h();const e=document.querySelector(".pass-device-btn"),t=document.querySelector(".cover-blanket div p:nth-child(3)");document.querySelector("#name").textContent="Jack Aubrey",e.textContent="Start Game",e.style.color="white",t.textContent="shoots first",e.addEventListener("click",(function t(){document.querySelector("#form-container").style.display="none",document.querySelector("#container-two").style.display="flex",document.querySelector("#container-one").style.display="flex",document.querySelectorAll(".sunk-ships").forEach(e=>e.style.display="inherit"),document.querySelectorAll(".gameboard-two .cell").forEach(e=>e.classList.remove("disabled")),f(),document.querySelectorAll(".gameboard-two .ship-starting-point").forEach(e=>e.style.opacity=0),e.removeEventListener("click",t)})),e.addEventListener("click",()=>{f(),document.querySelector(".main-screen").style.transform="scale(1)"})}function h(e=!1){if(document.querySelector(".cover-blanket").classList.add("active"),document.querySelector("#container-two").style.display="flex",e){const e=document.querySelector(".pass-device-btn");e.addEventListener("click",(function t(){document.querySelector("#container-one").style.display="none",document.querySelector("#player-two-name").textContent="Captain Hack Finch",f(),document.querySelector("#container-two").style.display="flex",e.removeEventListener("click",t)}))}}function f(){document.querySelector(".cover-blanket").classList.remove("active")}function y(e,t,o){h(),document.querySelector(".cover-blanket div p:nth-child(1)").textContent="Captain",document.querySelector("#name").textContent=`${o}'s`,document.querySelector(".cover-blanket div p:nth-child(3)").textContent="turn",document.querySelector(".pass-device-btn").textContent="Pass Device",function(e,t){document.querySelectorAll(`.gameboard-${e} .ship-starting-point`).forEach(e=>e.style.opacity=t)}(e,t),document.querySelector(".main-screen").style.transform="scale(0)"}function g(){if(/Mobi|Android/i.test(navigator.userAgent)){document.querySelector("#form-title").textContent="Tap on a cell",document.querySelectorAll(".ship-container input").forEach(e=>{e.setAttribute("onkeydown","return false"),e.setAttribute("onfocus","blur()")})}}function C(e,t,o,a,n,r,s,c){const i=function(e,t){return t.right>e.right-5&&t.bottom>e.bottom-5}(t,o),l=function(e,t,o,a,n){const r=Array.from(document.querySelectorAll(`.gameboard-${a} .cell`)).filter(e=>e.dataset.ship);let s=!1;if(n){if(n){const{firstCoord:a,secondCoord:n,thirdCoord:c,fourthCoord:i}=v(e,t,o);s=r.some(e=>e.dataset.coordinate===a||e.dataset.coordinate===n||e.dataset.coordinate===c||e.dataset.coordinate===i)}}else{const{firstCoord:a,secondCoord:n,thirdCoord:c,fourthCoord:i}=b(e,t,o);s=r.some(e=>e.dataset.coordinate===a||e.dataset.coordinate===n||e.dataset.coordinate===c||e.dataset.coordinate===i)}return s}(n,r,s,a,c);i&&!l?e.setCustomValidity(""):i&&!l||e.setCustomValidity("Invalid coordinate")}function v(e,t,o){if(4===o){return{firstCoord:`${e}${t}`,secondCoord:`${String.fromCharCode(e.charCodeAt(e)+1)}${t}`,thirdCoord:`${String.fromCharCode(e.charCodeAt(e)+2)}${t}`,fourthCoord:`${String.fromCharCode(e.charCodeAt(e)+3)}${t}`}}if(3===o){return{firstCoord:`${e}${t}`,secondCoord:`${String.fromCharCode(e.charCodeAt(e)+1)}${t}`,thirdCoord:`${String.fromCharCode(e.charCodeAt(e)+2)}${t}`,fourthCoord:!1}}if(2===o){return{firstCoord:`${e}${t}`,secondCoord:`${String.fromCharCode(e.charCodeAt(e)+1)}${t}`,thirdCoord:!1,fourthCoord:!1}}}function b(e,t,o){if(4===o){return{firstCoord:`${e}${t}`,secondCoord:`${e}${parseInt(t)+1}`,thirdCoord:`${e}${parseInt(t)+2}`,fourthCoord:`${e}${parseInt(t)+3}`}}if(3===o){return{firstCoord:`${e}${t}`,secondCoord:`${e}${parseInt(t)+1}`,thirdCoord:`${e}${parseInt(t)+2}`,fourthCoord:!1}}if(2===o){return{firstCoord:`${e}${t}`,secondCoord:`${e}${parseInt(t)+1}`,thirdCoord:!1,fourthCoord:!1}}}const S=new RegExp("[A-Ha-h]{1}[1-8]"),E=new Event("input",{bubbles:!0,cancelable:!0}),A=new Event("click",{bubbles:!0,cancelable:!0});let L=0;function q(e,t="false",o="false",a="false",n){document.querySelectorAll(`.gameboard-${n} .cell`).forEach(n=>{n.dataset.coordinate===e.toUpperCase()&&(n.dataset.ship="ship-part"),n.dataset.coordinate===t.toUpperCase()&&(n.dataset.ship="ship-part"),n.dataset.coordinate===o.toUpperCase()&&(n.dataset.ship="ship-part"),n.dataset.coordinate===a.toUpperCase()&&(n.dataset.ship="ship-part")})}function k(e,t,o,a,n){const r=document.getElementById("smallest-ship"),s=document.getElementById("place-smallest"),c=document.getElementById("smallest-quantity");let i=0;r.addEventListener("input",(function(t){t.preventDefault();const o=document.querySelectorAll(`.gameboard-${e} .cell`);S.test(r.value)?S.test(r.value)&&r.setCustomValidity(""):r.setCustomValidity("Invalid coordinate"),o.forEach(e=>{if(e.dataset.coordinate===r.value.toUpperCase()){const t=document.querySelector(".current")||0;t&&t.remove();const o=document.createElement("div");o.classList.add("ship-starting-point"),o.classList.add("smallest-ship"),o.classList.add("current"),e.appendChild(o),e.dataset.ship&&r.setCustomValidity("Invalid coordinate")}})})),r.addEventListener("keyup",(function(e){13===e.keyCode&&(e.preventDefault(),s.click())})),s.addEventListener("click",(function(s){if(s.preventDefault(),new RegExp("[A-Ha-h]{1}[1-8]").test(r.value)&&i<4&&r.checkValidity()){const s=document.querySelector(".current");t.placeShip(r.value.toUpperCase()),s.dataset.first=r.value,q(r.value,"false","false","false",e),r.value="",c.textContent=`${++i}/4`,s.classList.remove("current"),r.focus(),L++,4===i&&(r.disabled=!0,c.style.color="green",document.getElementById("smallest-ship").blur(),10===L&&"one-player"===o?m():"two-players"===o&&!1!==a?(L=0,h(!0),function(){const e=document.querySelector("#form-container"),t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),Array.from(document.querySelectorAll(".ship-container")).forEach(e=>{e.classList.remove("scale-in-hor-center"),e.classList.contains("biggest-ship-container")?e.style.display="flex":e.style.display="none"}),Array.from(document.querySelectorAll(".ship-container span span")).forEach((e,t)=>{e.style.color="#272727",e.textContent=`0/${t+1}`}),Array.from(document.querySelectorAll("button")).forEach(e=>e.disabled=!1)}(),B("two",n,a,"two-players"),document.querySelector("#container-two").style.display="none"):10===L&&"two-players"===o&&!1===a&&(document.querySelectorAll(".cell").forEach(e=>{e.dispatchEvent(A)}),p()))}}))}function $(e,t,o=!1,a=!1,n=!1){e.dataset.first=t,o&&(e.dataset.second=o),a&&(e.dataset.third=a),n&&(e.dataset.fourth=n)}function B(e,t,o,a,n=!1){!function(e,t,o){const a=document.getElementById("biggest-ship"),n=document.getElementById("place-biggest"),r=document.getElementById("rotate-biggest"),s=document.getElementById("biggest-quantity");/Mobi|Android/i.test(navigator.userAgent)||a.focus(),document.querySelector(".biggest-ship-container").classList.add("jello-horizontal"),document.getElementById("bigger-ship").disabled=!0,document.getElementById("smaller-ship").disabled=!0,document.getElementById("smallest-ship").disabled=!0,a.addEventListener("input",(function(){const t=document.querySelectorAll(`.gameboard-${e} .cell`);S.test(a.value)?S.test(a.value)&&a.setCustomValidity(""):a.setCustomValidity("Invalid coordinate"),t.forEach(t=>{if(t.dataset.coordinate===a.value.toUpperCase()){document.querySelectorAll(`.gameboard-${e} .biggest-ship`).forEach(e=>e.remove());const n=document.createElement("div");n.classList.add("ship-starting-point"),n.classList.add("biggest-ship"),t.appendChild(n);const[r,s]=a.value.toUpperCase();C(a,n.getBoundingClientRect(),o,e,r,s,4,!1)}})})),a.addEventListener("keyup",(function(e){13===e.keyCode&&(e.preventDefault(),a.click())})),n.addEventListener("click",(function(o){if(o.preventDefault(),S.test(a.value)&&a.checkValidity()){const o=document.querySelector(`.gameboard-${e} .biggest-ship`),[n,c]=a.value.toUpperCase();if(o.classList.contains("rotated")){if(o.classList.contains("rotated")){const{firstCoord:a,secondCoord:r,thirdCoord:s,fourthCoord:i}=v(n,c,4);t.placeShip(a,r,s,i),$(o,a,r,s,i),q(a,r,s,i,e)}}else{const{firstCoord:a,secondCoord:r,thirdCoord:s,fourthCoord:i}=b(n,c,4);t.placeShip(a,r,s,i),$(o,a,r,s,i),q(a,r,s,i,e)}a.value="",a.disabled=!0,s.textContent="1/1",s.style.color="green",r.disabled=!0,L++,document.querySelectorAll(".ship-container")[0].style.display="none",document.querySelectorAll(".ship-container")[1].style.display="flex",document.querySelectorAll(".ship-container")[1].classList.toggle("scale-in-hor-center"),document.getElementById("bigger-ship").disabled=!1,document.getElementById("bigger-ship").focus()}})),r.addEventListener("click",(function(t){t.preventDefault();const n=document.querySelector(`.gameboard-${e} .biggest-ship`);n.classList.toggle("rotated");const r=n.classList.contains("rotated");a.focus();const[s,c]=a.value.toUpperCase();C(a,n.getBoundingClientRect(),o,e,s,c,4,r)}))}(e,o,t),function(e,t,o){const a=document.getElementById("bigger-ship"),n=document.getElementById("place-bigger"),r=document.getElementById("rotate-bigger"),s=document.getElementById("bigger-quantity");let c=0;a.addEventListener("input",(function(t){t.preventDefault();const n=document.querySelectorAll(`.gameboard-${e} .cell`);S.test(a.value)?S.test(a.value)&&a.setCustomValidity(""):a.setCustomValidity("Invalid coordinate"),n.forEach(t=>{if(t.dataset.coordinate===a.value.toUpperCase()){const n=document.querySelector(".current")||0;n&&n.remove();const r=document.createElement("div");r.classList.add("ship-starting-point"),r.classList.add("bigger-ship"),r.classList.add("current"),t.appendChild(r);const[s,c]=a.value.toUpperCase();C(a,r.getBoundingClientRect(),o,e,s,c,3,!1)}})})),a.addEventListener("keyup",(function(e){13===e.keyCode&&(e.preventDefault(),n.click())})),n.addEventListener("click",(function(o){if(o.preventDefault(),new RegExp("[A-Ha-h]{1}[1-8]").test(a.value)&&c<2&&a.checkValidity()){const[o,n]=a.value.toUpperCase(),r=document.querySelector(".bigger-ship.current");if(r.classList.contains("rotated")){if(r.classList.contains("rotated")){const{firstCoord:a,secondCoord:s,thirdCoord:c}=v(o,n,3);t.placeShip(a,s,c),$(r,a,s,c),q(a,s,c,"false",e)}}else{const{firstCoord:a,secondCoord:s,thirdCoord:c}=b(o,n,3);t.placeShip(a,s,c),$(r,a,s,c),q(a,s,c,"false",e)}a.value="",s.textContent=`${++c}/2`,r.classList.remove("current"),a.focus(),L++,2===c&&(a.disabled=!0,s.style.color="green",document.querySelectorAll(".ship-container")[1].style.display="none",document.querySelectorAll(".ship-container")[2].style.display="flex",document.querySelectorAll(".ship-container")[2].classList.toggle("scale-in-hor-center"),document.getElementById("smaller-ship").disabled=!1,document.getElementById("smaller-ship").focus())}})),r.addEventListener("click",(function(t){t.preventDefault();const n=document.querySelector(".bigger-ship.current");n.classList.toggle("rotated"),a.focus();const r=n.classList.contains("rotated"),[s,c]=a.value.toUpperCase();C(a,n.getBoundingClientRect(),o,e,s,c,3,r)}))}(e,o,t),function(e,t,o){const a=document.getElementById("smaller-ship"),n=document.getElementById("place-smaller"),r=document.getElementById("rotate-smaller"),s=document.getElementById("smaller-quantity");let c=0;a.addEventListener("input",(function(t){t.preventDefault();const n=document.querySelectorAll(`.gameboard-${e} .cell`);S.test(a.value)?S.test(a.value)&&a.setCustomValidity(""):a.setCustomValidity("Invalid coordinate"),n.forEach(t=>{if(t.dataset.coordinate===a.value.toUpperCase()){const n=document.querySelector(".current")||0;n&&n.remove();const r=document.createElement("div");r.classList.add("ship-starting-point"),r.classList.add("smaller-ship"),r.classList.add("current"),t.appendChild(r);const[s,c]=a.value.toUpperCase();C(a,r.getBoundingClientRect(),o,e,s,c,2,!1)}})})),a.addEventListener("keyup",(function(e){13===e.keyCode&&(e.preventDefault(),n.click())})),n.addEventListener("click",(function(o){if(o.preventDefault(),new RegExp("[A-Ha-h]{1}[1-8]").test(a.value)&&c<3&&a.checkValidity()){const[o,n]=a.value.toUpperCase(),r=document.querySelector(".current");if(r.classList.contains("rotated")){if(r.classList.contains("rotated")){const{firstCoord:a,secondCoord:s}=v(o,n,2);t.placeShip(a,s),$(r,a,s),q(a,s,"false","false",e)}}else{const{firstCoord:a,secondCoord:s}=b(o,n,2);t.placeShip(a,s),$(r,a,s),q(a,s,"false","false",e)}a.value="",s.textContent=`${++c}/3`,r.classList.remove("current"),a.focus(),L++,3===c&&(a.disabled=!0,s.style.color="green",document.querySelectorAll(".ship-container")[2].style.display="none",document.querySelectorAll(".ship-container")[3].style.display="flex",document.querySelectorAll(".ship-container")[3].classList.toggle("scale-in-hor-center"),document.getElementById("smallest-ship").disabled=!1,document.getElementById("smallest-ship").focus())}})),r.addEventListener("click",(function(t){t.preventDefault();const n=document.querySelector(".smaller-ship.current");n.classList.toggle("rotated"),a.focus();const r=n.classList.contains("rotated"),[s,c]=a.value.toUpperCase();C(a,n.getBoundingClientRect(),o,e,s,c,2,r)}))}(e,o,t),k(e,o,a,n,t),document.querySelector("#biggest-ship").disabled=!1,"one"===e||10===L?x(e):"two"===e&&x(e)}function x(e){const t=document.querySelectorAll(`.gameboard-${e} .cell`),o=Array.from(document.querySelectorAll(".ship-container input"));t.forEach(e=>{e.addEventListener("click",(function e(a){if(10===L)return void t.forEach(t=>t.removeEventListener("click",e));const[n]=o.filter(e=>!1===e.disabled);n.value=a.target.dataset.coordinate,n.dispatchEvent(E),n.focus()}))})}function D(){return document.querySelector(".gameboard-one").getBoundingClientRect()}const I=[[["A3","A4","A5","A6"],["C2","D2","E2"],["H5","H6","H7"],["D7","D8"],["A1","B1"],["G1","G2"],["C5"],["F8"],["H3"],["F5"]],[["E2","F2","G2","H2"],["B5","B6","B7"],["F6","F7","F8"],["A2","A3"],["C3","D3"],["H5","H6"],["C1"],["D5"],["D7"],["F4"]],[["D8","E8","F8","G8"],["A6","A7","A8"],["H5","H6","H7"],["A2","A3"],["C1","D1"],["F1","G1"],["D3"],["D6"],["F3"],["F6"]],[["B3","C3","D3","E3"],["G2","G3","G4"],["B5","B6","B7"],["D5","E5"],["F6","F7"],["H7","H8"],["A4"],["B1"],["E1"],["D8"]],[["C1","D1","E1","F1"],["C6","C7","C8"],["F6","F7","F8"],["A4","A5"],["H4","H5"],["D6","E6"],["C3"],["D4"],["E4"],["F3"]]][Math.floor(5*Math.random())];function w(){l(),d(),c("one"),c("two");const e=a(),t=r(),o=n(),m=r();return I.forEach(e=>{m.placeShip(...e)}),function(e,t){const o=Array.from(document.querySelectorAll(`.gameboard-${t} .cell`)),a=e.getBattleships().map(e=>e.getShipCoordinates()),n=[];for(let e=0;e<a.length;e++)for(let t=0;t<a[e].length;t++)n.push(a[e][t]);const r=[];for(let e=0;e<o.length;e++)for(let t=0;t<n.length;t++)o[e].dataset.coordinate===n[t]&&r.push(o[e]);r.forEach(e=>{e.classList.add("ship"),e.dataset.ship="ship-part"})}(m,"two"),function(e,t,o,a){const n=document.querySelectorAll(".gameboard-two .cell");n.forEach(r=>{r.addEventListener("click",c=>{c.target.dataset.hit||c.target.classList.contains("disabled")||(e.sendAttack(t,c.target.dataset.coordinate),n.forEach(e=>e.classList.add("disabled")),!c.target.dataset.ship&&e.getPlayerTurn()?(c.target.classList.add("sea"),r.dataset.hit="true",e.setPlayerTurn(!1),o.playerTurn=!0,setTimeout(()=>{!function e(t,o,a,n=!1){const r=document.querySelectorAll(".gameboard-one .cell"),c=document.querySelectorAll(".gameboard-two .cell"),l=n||t.randomCoordinate();n&&(t.setAvailableCoordinates(t.getAvailableCoordinates(),n),t.maxLength=t.maxLength-1);t.sendAttack(o,l),r.forEach(n=>{if(!n.classList.contains("disabled")){if(n.dataset.coordinate===l&&n.dataset.ship&&!n.dataset.hit)return n.classList.add("explosion"),n.dataset.hit="true",a.setPlayerTurn(!1),c.forEach(e=>e.classList.add("disabled")),i(o,"player1"),void setTimeout(()=>{e(t,o,a,function(e,t){const o=document.querySelectorAll(".ship-starting-point"),a=document.querySelectorAll(".gameboard-one .cell");let[n,r]=e,[s,c]=e;o.forEach(e=>{!t.dataset.ship||e.dataset.first!==t.dataset.coordinate&&e.dataset.second!==t.dataset.coordinate&&e.dataset.third!==t.dataset.coordinate&&e.dataset.fourth!==t.dataset.coordinate||(e.classList.contains("rotated")&&n<"H"?n=String.fromCharCode(n.charCodeAt(n)+1):!e.classList.contains("rotated")&&r<8&&(r=parseInt(r)+1))}),o.forEach(e=>{!t.dataset.ship||e.dataset.first!==t.dataset.coordinate&&e.dataset.second!==t.dataset.coordinate&&e.dataset.third!==t.dataset.coordinate&&e.dataset.fourth!==t.dataset.coordinate||(e.classList.contains("rotated")&&n>"A"?s=String.fromCharCode(s.charCodeAt(s)-1):!e.classList.contains("rotated")&&c>1&&(c=parseInt(c)-1))});const i=`${n}${r}`,l=`${s}${c}`,d=Array.from(a).find(e=>e.dataset.coordinate===i),u=Array.from(a).find(e=>e.dataset.coordinate===l);let m;if(d.dataset.hit)return u.dataset.hit?(m=!1,m):(m=`${s}${c}`,m);if(!d.dataset.hit)return m=`${n}${r}`,m}(l,n))},500);n.dataset.ship||n.dataset.coordinate!==l||(n.classList.add("sea"),n.dataset.hit="true",c.forEach(e=>e.classList.remove("disabled")))}o.allShipsSunk()&&(s.GameOver("Computer"),c.forEach(e=>{e.classList.add("disabled")}))}),a.setPlayerTurn(!0)}(o,a,e)},1e3)):c.target.dataset.ship&&e.getPlayerTurn()&&(c.target.classList.add("explosion"),r.dataset.hit="true",n.forEach(e=>e.classList.remove("disabled")),i(t,"player2")),t.allShipsSunk()&&(s.GameOver("Human"),n.forEach(e=>{e.classList.add("disabled")})))})})}(e,m,o,t),u(),x(),{Human:e,HumanGameboard:t,Computer:o,ComputerGameboard:m}}function H(){l(),d(),c("one"),c("two"),u(),document.querySelector("#player-one-name").textContent="Captain Jack Aubrey",document.querySelector("#player-two-name").textContent="Captain Hack Finch";const e=a(),t=a(),o=r(),n=r();return function(e,t,o){const a=document.querySelectorAll(".gameboard-one .cell"),n=document.querySelectorAll(".gameboard-two .cell");n.forEach(r=>{r.addEventListener("click",c=>{c.target.dataset.hit||c.target.classList.contains("disabled")||(e.sendAttack(o,c.target.dataset.coordinate),n.forEach(e=>e.classList.add("disabled")),!c.target.dataset.ship&&e.getPlayerTurn()?(c.target.classList.add("sea"),r.dataset.hit="true",e.setPlayerTurn(!1),t.setPlayerTurn(!0),a.forEach(e=>e.classList.remove("disabled")),setTimeout(()=>{y("one",0),y("two",1,"Hack Finch")},1e3)):c.target.dataset.ship&&e.getPlayerTurn()&&!c.target.dataset.hit&&(c.target.classList.add("explosion"),r.dataset.hit="true",n.forEach(e=>e.classList.remove("disabled")),i(o,"player2")),o.allShipsSunk()&&(s.GameOver("Jack Aubrey"),document.querySelectorAll(".cell").forEach(e=>e.classList.add("disabled"))))})})}(e,t,n),function(e,t,o){const a=document.querySelectorAll(".gameboard-one .cell"),n=document.querySelectorAll(".gameboard-two .cell");a.forEach(r=>{r.addEventListener("click",c=>{c.target.dataset.hit||c.target.classList.contains("disabled")||(e.sendAttack(o,c.target.dataset.coordinate),a.forEach(e=>e.classList.add("disabled")),!c.target.dataset.ship&&e.getPlayerTurn()?(c.target.classList.add("sea"),r.dataset.hit="true",e.setPlayerTurn(!1),t.setPlayerTurn(!0),n.forEach(e=>e.classList.remove("disabled")),setTimeout(()=>{y("two",0),y("one",1,"Jack Aubrey")},1e3)):c.target.dataset.ship&&e.getPlayerTurn()&&!c.target.dataset.hit&&(c.target.classList.add("explosion"),r.dataset.hit="true",a.forEach(e=>e.classList.remove("disabled")),i(o,"player1")),o.allShipsSunk()&&(s.GameOver("Hack Finch"),document.querySelectorAll(".cell").forEach(e=>e.classList.add("disabled"))))})})}(t,e,o),{JackAubrey:e,HackFinch:t,AubreyGameboard:o,FinchGameboard:n}}document.querySelector(".one-player").addEventListener("click",e=>{e.preventDefault();const t=w(),{HumanGameboard:o}=t;B("one",D(),o,"one-player"),g()}),document.querySelector(".two-players").addEventListener("click",e=>{e.preventDefault();const t=H(),{AubreyGameboard:o,FinchGameboard:a}=t;B("one",D(),o,"two-players",a),document.querySelectorAll(".cell").forEach(e=>e.classList.add("disabled")),g()}),document.querySelector("#reload").addEventListener("click",e=>{e.preventDefault(),location.reload()})}]);